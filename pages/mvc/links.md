Mvc_Links
=========

Класс Mvc_Links позволяет получать ссылки на страницы проекта на основе 
настроенных маршрутов. Все ссылки генерируются в соответствии с параметром 
конфигурации `base_url`. То есть, если в нём прописан адрес сайта 
`http://remote-edu/deeply/nested/path`, то все ссылки, выдаваемые 
менеджером будут иметь префикс `/deeply/nested/path/`.

Получение объекта менеджера ссылок
----------------------------------

Получение объекта менеджера ссылок происходит через обращение к ресурсу:
    
    $links = Resources::getInstance()->links;
    
Внутри всех шаблонов менеджер автоматически доступен через:
    
    $this->_links;

Ссылки на файлы
-----------------------

Если в шаблоне необходимо получить адрес какого-либа файла на сайте, например 
CSS-файла, то для этого надо использовать метод `getPath()`:

    $this->_links->getPath('/files/css/index.css');

    
Простые ссылки
--------------

Если в конфигурации прописан следующий маршрут:
    
    /* Авторизация */
    array('/login', 'users', 'login', 'users.login', Mvc_Router::ROUTE_STATIC)
    
то для получения ссылки на страницу авторизации надо вызвать метод `get()` и 
передать ему алиас маршрута:

    $links->get('users.login');
    
Ссылки с параметрами
--------------------

Пусть задан маршрут с регулярным выражением:

    /* Чтение сообщения */
    array('/messages/read/([0-9]+)', array('message_id'), 'messages', 'message', 'messages.read', Mvc_Router::ROUTE_REGEX)       

Для получения ссылки в этом случае надо использовать вызов с передачей 
параметров маршрута в массиве:
    
    $links->get('messages.read', array('message_id' => $id));
                                          
Также возможно опускать параметры маршрута, но только с конца. Например, задан 
маршрут:

    /* Активация слушателя */
    array('/student/activate/([0-9]+)/([0-9a-z]{32})', array('user_id', 'code'), 'users', 'activate_student', 'student.activate', Mvc_Router::ROUTE_REGEX)
    
В этом случае ссылку с полным списком параметров можно получить так:
    
    $links->get('student.activate', array('user_id' => $id,
                                          'code'    => $code));
                                          
Но можно и опустить последний параметр — код активации:
                                          
    $links->get('student.activate', array('user_id' => $id));
    
Ссылка будет успешно сгенерирована, но в ней не будет последнего параметра. 
Здесь следует быть внимательным: несмотря на то, что ссылка будет сгенерирована, 
при переходе по ней этот маршрут не сработает, так как в нём оба параметры 
являются обязательными. Чтобы объявить необязательный параметр, для подмаски 
параметра надо использовать квантификатор `?`:
    
    /* Оправка сообщения */
    array('/messages/send/([0-9]+)?', array('to_id'), 'messages', 'send', 'messages.send', Mvc_Router::ROUTE_REGEX)
    
В этом случае, ссылка, полученная через вызов без параметров маршрута будет 
корректна и совпадать с шаблоном этого маршрута.